# ═══════════════════════════════════════════════════════════════════════════════
# SAHOOL Platform Environment Configuration
# Copy this file to .env and fill in your values
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# Core Application Settings (UNIFIED)
# ─────────────────────────────────────────────────────────────────────────────
# Use ENVIRONMENT as the single source of truth for environment name
ENVIRONMENT=development
LOG_LEVEL=INFO
SERVICE_LAYER=kernel
DEFAULT_TENANT=default
APP_SECRET_KEY=your_app_secret_key_at_least_32_characters_long_change_me

# ─────────────────────────────────────────────────────────────────────────────
# Database Configuration (REQUIRED)
# ─────────────────────────────────────────────────────────────────────────────
POSTGRES_USER=sahool
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=sahool
DATABASE_URL=postgresql://sahool:your_secure_password_here@localhost:5432/sahool

# ─────────────────────────────────────────────────────────────────────────────
# Redis Configuration (REQUIRED)
# ─────────────────────────────────────────────────────────────────────────────
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_URL=redis://:your_secure_redis_password_here@localhost:6379

# ─────────────────────────────────────────────────────────────────────────────
# Message Queue Configuration
# ─────────────────────────────────────────────────────────────────────────────
NATS_URL=nats://localhost:4222

# ─────────────────────────────────────────────────────────────────────────────
# JWT Configuration (UNIFIED - REQUIRED for auth services)
# ─────────────────────────────────────────────────────────────────────────────
# Use JWT_SECRET_KEY as the single source of truth
JWT_SECRET_KEY=your_jwt_secret_key_at_least_32_characters_long
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30
JWT_AUDIENCE=sahool-api
JWT_ISSUER=sahool-platform
# Optional: RSA keys for RS256 algorithm
JWT_PRIVATE_KEY_PATH=
JWT_PUBLIC_KEY_PATH=

# ─────────────────────────────────────────────────────────────────────────────
# Security & Authentication Settings
# ─────────────────────────────────────────────────────────────────────────────
SAHOOL_AUTH_ENABLED=true
MFA_ENABLED=false
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30
TOTP_ISSUER=SAHOOL

# ─────────────────────────────────────────────────────────────────────────────
# HashiCorp Vault Configuration (Optional - for secrets management)
# ─────────────────────────────────────────────────────────────────────────────
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=
VAULT_ROLE_ID=
VAULT_SECRET_ID=
VAULT_NAMESPACE=

# ─────────────────────────────────────────────────────────────────────────────
# CORS Configuration (UNIFIED)
# ─────────────────────────────────────────────────────────────────────────────
# Use CORS_ALLOWED_ORIGINS as the single source of truth
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ─────────────────────────────────────────────────────────────────────────────
# Service Ports Configuration
# ─────────────────────────────────────────────────────────────────────────────
PORT=8000
SERVICE_PORT=8000
AUTH_SERVICE_PORT=8001
USER_SERVICE_PORT=8002
TENANT_SERVICE_PORT=8003
NOTIFICATION_SERVICE_PORT=8004
GEO_SERVICE_PORT=8005
MARKET_SERVICE_PORT=8006
EQUIPMENT_SERVICE_PORT=8007
CROP_LIFECYCLE_PORT=8008
SOIL_SERVICE_PORT=8009
ALERTS_PORT=8010
TASKS_PORT=8011
NDVI_PORT=8012
ADVISOR_CORE_PORT=8013
SCHEMA_REGISTRY_PORT=8014
PROCESS_MANAGER_PORT=8015

# ─────────────────────────────────────────────────────────────────────────────
# External Service URLs
# ─────────────────────────────────────────────────────────────────────────────
BASE_URL=http://localhost:8000
FIELDOPS_URL=http://localhost:8000
WEATHER_URL=http://localhost:8000/weather
SATELLITE_URL=http://localhost:8000/satellite
FERTILIZER_URL=http://localhost:8000/fertilizer
IRRIGATION_URL=http://localhost:8000/irrigation
INDICATORS_URL=http://localhost:8000/indicators

# ─────────────────────────────────────────────────────────────────────────────
# External API Keys (Optional - for enhanced features)
# ─────────────────────────────────────────────────────────────────────────────
# Weather API
OPENWEATHER_API_KEY=your_openweather_api_key

# Satellite Imagery
PLANET_API_KEY=your_planet_api_key
SENTINEL_HUB_CLIENT_ID=your_sentinel_hub_client_id
SENTINEL_HUB_CLIENT_SECRET=your_sentinel_hub_client_secret

# Maps
GOOGLE_MAPS_API_KEY=your_google_maps_api_key

# ─────────────────────────────────────────────────────────────────────────────
# AI/ML Configuration
# ─────────────────────────────────────────────────────────────────────────────
AI_MODEL_ENDPOINT=http://localhost:8080/predict
MODEL_PATH=/models
USE_LOCAL_MODEL=false
USE_MOCK_WEATHER=false
CONFIDENCE_THRESHOLD=0.8
EXPERT_REVIEW_THRESHOLD=0.6
SIGNIFICANT_CHANGE_PERCENT=10

# ─────────────────────────────────────────────────────────────────────────────
# MQTT Configuration (IoT Integration)
# ─────────────────────────────────────────────────────────────────────────────
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_TOPIC=sahool/devices

# ─────────────────────────────────────────────────────────────────────────────
# Firebase Configuration (Optional - for mobile push notifications)
# ─────────────────────────────────────────────────────────────────────────────
FIREBASE_PROJECT_ID=
FIREBASE_CREDENTIALS=
FCM_SERVER_KEY=your_fcm_server_key

# ─────────────────────────────────────────────────────────────────────────────
# SMTP Configuration (Email Notifications)
# ─────────────────────────────────────────────────────────────────────────────
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@sahool.com
SMTP_FROM_NAME=SAHOOL Platform

# ─────────────────────────────────────────────────────────────────────────────
# SMS Configuration (Optional)
# ─────────────────────────────────────────────────────────────────────────────
SMS_PROVIDER=twilio
SMS_API_KEY=
SMS_API_SECRET=
SMS_FROM_NUMBER=

# Twilio (SMS)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=your_twilio_phone_number

# ─────────────────────────────────────────────────────────────────────────────
# File Upload & Storage Configuration
# ─────────────────────────────────────────────────────────────────────────────
UPLOAD_DIR=/uploads
AVATAR_UPLOAD_PATH=/uploads/avatars
CDN_BASE_URL=https://cdn.sahool.com

# ─────────────────────────────────────────────────────────────────────────────
# Observability & Monitoring
# ─────────────────────────────────────────────────────────────────────────────
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
SERVICE_NAME=sahool-platform

# Grafana Admin Credentials (REQUIRED for observability stack)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your_secure_grafana_password_here
GRAFANA_ROOT_URL=http://localhost:3002

# ─────────────────────────────────────────────────────────────────────────────
# Application Limits & Retry Configuration
# ─────────────────────────────────────────────────────────────────────────────
MAX_NOTIFICATIONS_PER_HOUR=100
MAX_RETRIES=3
RETRY_DELAY_SECONDS=5
MAINTENANCE_CHECK_INTERVAL=3600
PLAN_LIMITS={"free":{"fields":10},"pro":{"fields":100},"enterprise":{"fields":-1}}
TRIAL_DAYS=14

# ─────────────────────────────────────────────────────────────────────────────
# WebSocket Configuration
# ─────────────────────────────────────────────────────────────────────────────
WS_REQUIRE_AUTH=true
