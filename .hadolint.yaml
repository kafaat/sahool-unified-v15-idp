# Hadolint Configuration for SAHOOL Unified Platform
# Version: 16.0.0
# Dockerfile linting rules and exclusions

# ═══════════════════════════════════════════════════════════════════════════════
# IGNORED RULES
# ═══════════════════════════════════════════════════════════════════════════════
ignored:
  # DL3008: Pin versions in apt-get install
  # Rationale: Alpine apk and some base images handle this differently
  - DL3008
  
  # DL3013: Pin versions in pip install  
  # Rationale: We use requirements.txt for version pinning
  - DL3013
  
  # DL3018: Pin versions in apk add
  # Rationale: Alpine Linux manages this at the image level
  - DL3018
  
  # DL3059: Multiple consecutive RUN instructions
  # Rationale: Sometimes necessary for clarity and layer optimization
  - DL3059
  
  # SC2046: Quote this to prevent word splitting
  # Rationale: False positives in multi-line commands
  - SC2046
  
  # SC1091: Not following sourced file
  # Rationale: Files may not exist in build context
  - SC1091

# ═══════════════════════════════════════════════════════════════════════════════
# TRUSTED REGISTRIES
# ═══════════════════════════════════════════════════════════════════════════════
trustedRegistries:
  - docker.io
  - ghcr.io
  - gcr.io
  - registry.hub.docker.com
  - mcr.microsoft.com
  - quay.io

# ═══════════════════════════════════════════════════════════════════════════════
# RULE OVERRIDES
# ═══════════════════════════════════════════════════════════════════════════════
override:
  # Treat warnings as informational only
  warning: info
  
  # Treat style issues as informational only  
  style: info
  
  # Keep errors as errors
  error: error

# ═══════════════════════════════════════════════════════════════════════════════
# STRICTNESS LEVEL
# ═══════════════════════════════════════════════════════════════════════════════
# Options: error, warning, info, style, ignore, none
failure-threshold: warning

# ═══════════════════════════════════════════════════════════════════════════════
# LABEL SCHEMA
# ═══════════════════════════════════════════════════════════════════════════════
# Enforce label schema for better image metadata
label-schema:
  # Author labels
  maintainer: text
  author: text
  
  # Service metadata
  service: text
  version: regex:^[0-9]+\.[0-9]+\.[0-9]+$
  description: text
  
  # OCI labels (optional)
  org.opencontainers.image.title: text
  org.opencontainers.image.version: text
  org.opencontainers.image.description: text
  org.opencontainers.image.authors: text
  org.opencontainers.image.source: url

# ═══════════════════════════════════════════════════════════════════════════════
# STRICT LABELS (NOT REQUIRED BUT RECOMMENDED)
# ═══════════════════════════════════════════════════════════════════════════════
strict-labels: false

# ═══════════════════════════════════════════════════════════════════════════════
# DISABLE SPECIFIC CHECKS
# ═══════════════════════════════════════════════════════════════════════════════
# Additional granular control over specific checks
no-fail: false
no-color: false
