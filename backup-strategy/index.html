
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Complete developer guide for the SAHOOL Agricultural Platform">
      
      
        <meta name="author" content="KAFAAT Team">
      
      
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูููุตุฉ ุณููู - SAHOOL Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="light-green">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SAHOOL Developer Documentation" class="md-header__button md-logo" aria-label="SAHOOL Developer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SAHOOL Developer Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูููุตุฉ ุณููู
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../index.md" class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../getting-started/installation.md" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../services/overview.md" class="md-tabs__link">
          
  
  
  Services

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/authentication/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../development/setup.md" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../contributing/guidelines.md" class="md-tabs__link">
          
  
  
  Contributing

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SAHOOL Developer Documentation" class="md-nav__button md-logo" aria-label="SAHOOL Developer Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    SAHOOL Developer Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/installation.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/quickstart.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/architecture.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Services
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Services
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/overview.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/starter.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Starter Package
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/professional.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Professional Package
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services/enterprise.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Enterprise Package
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/field-ops.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Field Operations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/weather/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Weather
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/satellite.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Satellite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/setup.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/testing.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../development/deployment.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Contributing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/guidelines.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guidelines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/code-style.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูููุตุฉ ุณููู<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h1 id="sahool-platform-backup-strategy">SAHOOL Platform Backup Strategy<a class="headerlink" href="#sahool-platform-backup-strategy" title="Permanent link">&para;</a></h1>
<p><strong>ุงููุณุฎุฉ:</strong> 1.0.0
<strong>ุขุฎุฑ ุชุญุฏูุซ:</strong> 2025-12-27
<strong>ุงููุณุคูู:</strong> ูุฑูู ุงูุจููุฉ ุงูุชุญุชูุฉ ูููุตุฉ ุณููู</p>
<hr />
<h2 id="table-of-contents">๐ ุฌุฏูู ุงููุญุชููุงุช | Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#ูุธุฑุฉ-ุนุงูุฉ">ูุธุฑุฉ ุนุงูุฉ</a></li>
<li><a href="#ุงุณุชุฑุงุชูุฌูุฉ-ุงููุณุฎ-ุงูุงุญุชูุงุทู-ูู-postgresql">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูู PostgreSQL</a></li>
<li><a href="#ุงุณุชุฑุงุชูุฌูุฉ-ุงููุณุฎ-ุงูุงุญุชูุงุทู-ูู-redis">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูู Redis</a></li>
<li><a href="#ุงุณุชุฑุงุชูุฌูุฉ-ุงููุณุฎ-ุงูุงุญุชูุงุทู-ูู-minio-s3">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูู MinIO/S3</a></li>
<li><a href="#ุฌุฏูู-ุงููุณุฎ-ุงูุงุญุชูุงุทู">ุฌุฏูู ุงููุณุฎ ุงูุงุญุชูุงุทู</a></li>
<li><a href="#ุฅุฌุฑุงุกุงุช-ุงูุงุณุชุนุงุฏุฉ">ุฅุฌุฑุงุกุงุช ุงูุงุณุชุนุงุฏุฉ</a></li>
<li><a href="#ุงููุฑุงูุจุฉ-ูุงูุฅุดุนุงุฑุงุช">ุงููุฑุงูุจุฉ ูุงูุฅุดุนุงุฑุงุช</a></li>
<li><a href="#ุงูุฃูุงู-ูุฃูุถู-ุงูููุงุฑุณุงุช">ุงูุฃูุงู ูุฃูุถู ุงูููุงุฑุณุงุช</a></li>
</ol>
<hr />
<h2 id="_2">ูุธุฑุฉ ุนุงูุฉ<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<h3 id="_3">ุงูุฃูุฏุงู ุงูุฑุฆูุณูุฉ<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>ุชูุฏู ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูููุตุฉ ุณููู ุฅูู:</p>
<ul>
<li><strong>ุญูุงูุฉ ุงูุจูุงูุงุช</strong>: ุถูุงู ุนุฏู ููุฏุงู ุงูุจูุงูุงุช ุงูุญุฑุฌุฉ</li>
<li><strong>ุงูุชุนุงูู ุงูุณุฑูุน</strong>: ุชูููู ููุช ุงูุชุนุทู (RTO &lt; 4 ุณุงุนุงุช)</li>
<li><strong>ููุทุฉ ุงุณุชุนุงุฏุฉ ุฏูููุฉ</strong>: ุงูุญุฏ ุงูุฃุฏูู ูููุฏุงู ุงูุจูุงูุงุช (RPO &lt; 1 ุณุงุนุฉ)</li>
<li><strong>ุงูุงูุชุซุงู</strong>: ุงูุงูุชุฒุงู ุจูุชุทูุจุงุช ุญูุงูุฉ ุงูุจูุงูุงุช</li>
<li><strong>ุงูุงุฎุชุจุงุฑ ุงูููุชุธู</strong>: ุงูุชุญูู ูู ุตุญุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ุดูุฑููุง</li>
</ul>
<h3 id="_4">ุงูููููุงุช ุงููุดูููุฉ ูู ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ุงููููู</th>
<th>ุงูููุน</th>
<th>ุงูุฃููููุฉ</th>
<th>ุงูุชูุฑุงุฑ</th>
</tr>
</thead>
<tbody>
<tr>
<td>PostgreSQL (PostGIS)</td>
<td>ูุงุนุฏุฉ ุจูุงูุงุช</td>
<td>ุญุฑุฌ</td>
<td>ููููุ ุฃุณุจูุนูุ ุดูุฑู</td>
</tr>
<tr>
<td>Redis</td>
<td>ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช</td>
<td>ุนุงูู</td>
<td>ูููู</td>
</tr>
<tr>
<td>MinIO/S3</td>
<td>ุชุฎุฒูู ุงููููุงุช</td>
<td>ุญุฑุฌ</td>
<td>ูููู</td>
</tr>
<tr>
<td>NATS JetStream</td>
<td>ูุงุฆูุฉ ุงูุฑุณุงุฆู</td>
<td>ูุชูุณุท</td>
<td>ูููู</td>
</tr>
<tr>
<td>ูููุงุช ุงูุฅุนุฏุงุฏุงุช</td>
<td>ุชูููู</td>
<td>ุนุงูู</td>
<td>ุนูุฏ ูู ุชุบููุฑ</td>
</tr>
</tbody>
</table>
<h3 id="_5">ูุนุงููุฑ ุงูุฃุฏุงุก<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>RTO (Recovery Time Objective)</strong>: 4 ุณุงุนุงุช</li>
<li><strong>RPO (Recovery Point Objective)</strong>: 1 ุณุงุนุฉ</li>
<li><strong>ูุณุจุฉ ูุฌุงุญ ุงููุณุฎ ุงูุงุญุชูุงุทู</strong>: &gt; 99.9%</li>
<li><strong>ููุช ุงูุชุญูู</strong>: &lt; 30 ุฏูููุฉ</li>
</ul>
<hr />
<h2 id="postgresql">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูู PostgreSQL<a class="headerlink" href="#postgresql" title="Permanent link">&para;</a></h2>
<h3 id="1">1. ุทุฑู ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<h4 id="logical-backup">ุฃ. ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูููุทูู (Logical Backup)<a class="headerlink" href="#logical-backup" title="Permanent link">&para;</a></h4>
<p><strong>ุงูุฃุฏุงุฉ</strong>: <code>pg_dump</code> / <code>pg_dumpall</code></p>
<p><strong>ุงููุฒุงูุง</strong>:</p>
<ul>
<li>ุณูููุฉ ุงูุงุณุชุนุงุฏุฉ ุงูุฌุฒุฆูุฉ</li>
<li>ููู ุงูุจูุงูุงุช ุจูู ุฅุตุฏุงุฑุงุช PostgreSQL ูุฎุชููุฉ</li>
<li>ูุงุจููุฉ ูููุฑุงุกุฉ ูุงูุชุนุฏูู (SQL format)</li>
</ul>
<p><strong>ุงูุงุณุชุฎุฏุงู</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุณุฎ ุงุญุชูุงุทู ูุงูู ุจุตูุบุฉ ูุฎุตุตุฉ (ููุตู ุจู)</span>
pg_dump<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-F<span class="w"> </span>c<span class="w"> </span>-f<span class="w"> </span>sahool_backup.dump<span class="w"> </span>sahool

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู ุจุตูุบุฉ SQL ูุตูุฉ</span>
pg_dump<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-f<span class="w"> </span>sahool_backup.sql<span class="w"> </span>sahool

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู ูุฌููุน ููุงุนุฏ ุงูุจูุงูุงุช</span>
pg_dumpall<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-f<span class="w"> </span>all_databases.sql
</code></pre></div>

<p><strong>ุงูุฌุฏูู ุงูุฒููู</strong>:</p>
<ul>
<li>ูููู: ุงูุณุงุนุฉ 2:00 ุตุจุงุญูุง</li>
<li>ุฃุณุจูุนู: ุงูุฃุญุฏ 3:00 ุตุจุงุญูุง</li>
<li>ุดูุฑู: ุฃูู ููู ูู ุงูุดูุฑ 4:00 ุตุจุงุญูุง</li>
</ul>
<h4 id="physical-backup">ุจ. ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูููุฒูุงุฆู (Physical Backup)<a class="headerlink" href="#physical-backup" title="Permanent link">&para;</a></h4>
<p><strong>ุงูุฃุฏุงุฉ</strong>: <code>pg_basebackup</code></p>
<p><strong>ุงููุฒุงูุง</strong>:</p>
<ul>
<li>ุงุณุชุนุงุฏุฉ ุฃุณุฑุน</li>
<li>ูุณุฎ ุงุญุชูุงุทู ุนูู ูุณุชูู ุงููููุงุช</li>
<li>ุฏุนู Point-in-Time Recovery (PITR)</li>
</ul>
<p><strong>ุงูุงุณุชุฎุฏุงู</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุณุฎ ุงุญุชูุงุทู ุฃุณุงุณู</span>
pg_basebackup<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-D<span class="w"> </span>/backups/base<span class="w"> </span>-F<span class="w"> </span>tar<span class="w"> </span>-z<span class="w"> </span>-P

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู ูุน WAL</span>
pg_basebackup<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-D<span class="w"> </span>/backups/base<span class="w"> </span>-X<span class="w"> </span>stream<span class="w"> </span>-P
</code></pre></div>

<p><strong>ุงูุฌุฏูู ุงูุฒููู</strong>:</p>
<ul>
<li>ุฃุณุจูุนู: ุงูุณุจุช 1:00 ุตุจุงุญูุง</li>
</ul>
<h3 id="2-postgresql">2. ุชูููู PostgreSQL ูููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#2-postgresql" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1">-- ุชูุนูู WAL archiving</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">wal_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;replica&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">archive_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;on&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">archive_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cp %p /var/lib/postgresql/wal_archive/%f&#39;</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">SYSTEM</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">max_wal_senders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>

<span class="c1">-- ุฅุนุงุฏุฉ ุชุญููู ุงูุฅุนุฏุงุฏุงุช</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">pg_reload_conf</span><span class="p">();</span>
</code></pre></div>

<h3 id="3">3. ุงูุถุบุท ูุงูุชุดููุฑ<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุถุบุท ูุน gzip</span>
pg_dump<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>sahool<span class="w"> </span><span class="p">|</span><span class="w"> </span>gzip<span class="w"> </span>&gt;<span class="w"> </span>backup.sql.gz

<span class="c1"># ุชุดููุฑ ูุน OpenSSL</span>
pg_dump<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>sahool<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>openssl<span class="w"> </span>enc<span class="w"> </span>-aes-256-cbc<span class="w"> </span>-salt<span class="w"> </span>-pbkdf2<span class="w"> </span>-out<span class="w"> </span>backup.sql.enc

<span class="c1"># ุถุบุท ูุชุดููุฑ ูุนูุง</span>
pg_dump<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>sahool<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>gzip<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>openssl<span class="w"> </span>enc<span class="w"> </span>-aes-256-cbc<span class="w"> </span>-salt<span class="w"> </span>-pbkdf2<span class="w"> </span>-out<span class="w"> </span>backup.sql.gz.enc
</code></pre></div>

<h3 id="4">4. ุณูุงุณุฉ ุงูุงุญุชูุงุธ<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ููุน ุงููุณุฎุฉ</th>
<th>ูุฏุฉ ุงูุงุญุชูุงุธ</th>
<th>ุนุฏุฏ ุงููุณุฎ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ูููู</td>
<td>7 ุฃูุงู</td>
<td>7 ูุณุฎ</td>
</tr>
<tr>
<td>ุฃุณุจูุนู</td>
<td>4 ุฃุณุงุจูุน</td>
<td>4 ูุณุฎ</td>
</tr>
<tr>
<td>ุดูุฑู</td>
<td>12 ุดูุฑ</td>
<td>12 ูุณุฎุฉ</td>
</tr>
<tr>
<td>ุณููู</td>
<td>5 ุณููุงุช</td>
<td>5 ูุณุฎ</td>
</tr>
</tbody>
</table>
<h3 id="5">5. ุงูุชุญูู ูู ุตุญุฉ ุงููุณุฎุฉ<a class="headerlink" href="#5" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงูุชุญูู ูู ุงููุณุฎุฉ ุงููุถุบูุทุฉ</span>
pg_restore<span class="w"> </span>--list<span class="w"> </span>backup.dump<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-20

<span class="c1"># ุงุฎุชุจุงุฑ ุงูุงุณุชุนุงุฏุฉ ูู ูุงุนุฏุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ</span>
pg_restore<span class="w"> </span>-h<span class="w"> </span>postgres<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-d<span class="w"> </span>sahool_test<span class="w"> </span>backup.dump<span class="w"> </span>--verbose
</code></pre></div>

<hr />
<h2 id="redis">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูู Redis<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h2>
<h3 id="1_1">1. ุทุฑู ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<h4 id="rdb-redis-database-backup">ุฃ. RDB (Redis Database Backup)<a class="headerlink" href="#rdb-redis-database-backup" title="Permanent link">&para;</a></h4>
<p><strong>ุขููุฉ ุงูุนูู</strong>: ููุทุฉ (snapshot) ุซูุงุฆูุฉ ููุจูุงูุงุช</p>
<p><strong>ุงูุชูููู ูู redis.conf</strong>:</p>
<div class="codehilite"><pre><span></span><code># ุญูุธ ุชููุงุฆู
save 900 1      # ุจุนุฏ 900 ุซุงููุฉ ุฅุฐุง ุชุบูุฑ ููุชุงุญ ูุงุญุฏ ุนูู ุงูุฃูู
save 300 10     # ุจุนุฏ 300 ุซุงููุฉ ุฅุฐุง ุชุบูุฑุช 10 ููุงุชูุญ
save 60 10000   # ุจุนุฏ 60 ุซุงููุฉ ุฅุฐุง ุชุบูุฑุช 10000 ููุชุงุญ

# ุงุณู ุงูููู
dbfilename dump.rdb

# ุงููุณุงุฑ
dir /data

# ุงูุถุบุท
rdbcompression yes

# ุงูุชุญูู ูู ุงูุชุฌุฒุฆุฉ
rdbchecksum yes
</code></pre></div>

<p><strong>ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููุฏูู</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุญูุธ ููุฑู (ูุนูู ุงูุนูููุงุช)</span>
redis-cli<span class="w"> </span>-a<span class="w"> </span><span class="nv">$REDIS_PASSWORD</span><span class="w"> </span>SAVE

<span class="c1"># ุญูุธ ูู ุงูุฎูููุฉ (ููุตู ุจู)</span>
redis-cli<span class="w"> </span>-a<span class="w"> </span><span class="nv">$REDIS_PASSWORD</span><span class="w"> </span>BGSAVE

<span class="c1"># ูุณุฎ ุงูููู</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sahool-redis<span class="w"> </span>redis-cli<span class="w"> </span>-a<span class="w"> </span><span class="nv">$REDIS_PASSWORD</span><span class="w"> </span>BGSAVE
sleep<span class="w"> </span><span class="m">5</span>
docker<span class="w"> </span>cp<span class="w"> </span>sahool-redis:/data/dump.rdb<span class="w"> </span>/backups/redis/dump_<span class="k">$(</span>date<span class="w"> </span>+%Y%m%d<span class="k">)</span>.rdb
</code></pre></div>

<h4 id="aof-append-only-file">ุจ. AOF (Append Only File)<a class="headerlink" href="#aof-append-only-file" title="Permanent link">&para;</a></h4>
<p><strong>ุงูุชูููู</strong>:</p>
<div class="codehilite"><pre><span></span><code># ุชูุนูู AOF
appendonly yes
appendfilename &quot;appendonly.aof&quot;

# ุงุณุชุฑุงุชูุฌูุฉ ุงููุฒุงููุฉ
appendfsync everysec  # ุชูุงุฒู ุจูู ุงูุฃุฏุงุก ูุงูุฃูุงู

# ุฅุนุงุฏุฉ ุงููุชุงุจุฉ ุงูุชููุงุฆูุฉ
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
</code></pre></div>

<p><strong>ุงููุณุฎ ุงูุงุญุชูุงุทู</strong>:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุฅุนุงุฏุฉ ูุชุงุจุฉ AOF</span>
redis-cli<span class="w"> </span>-a<span class="w"> </span><span class="nv">$REDIS_PASSWORD</span><span class="w"> </span>BGREWRITEAOF

<span class="c1"># ูุณุฎ ุงูููู</span>
docker<span class="w"> </span>cp<span class="w"> </span>sahool-redis:/data/appendonly.aof<span class="w"> </span>/backups/redis/
</code></pre></div>

<h3 id="2">2. ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูููุตู ุจูุง<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p><strong>ุงูููุฌ ุงููุฎุชูุท</strong>:</p>
<ul>
<li>ุงุณุชุฎุฏุงู RDB ูููุณุฎ ุงูุงุญุชูุงุทู ุงููููู (ุณุฑูุนุ ุญุฌู ุฃุตุบุฑ)</li>
<li>ุงุณุชุฎุฏุงู AOF ููุชุนุงูู ูู ุงููุดู (ุจูุงูุงุช ุฃุญุฏุซุ RPO ุฃูู)</li>
</ul>
<h3 id="3_1">3. ุงูุฌุฏูู ุงูุฒููู<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูููู: RDB snapshot</span>
<span class="m">0</span><span class="w"> </span><span class="m">2</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span>/scripts/backup/backup_redis.sh<span class="w"> </span>daily

<span class="c1"># ุฃุณุจูุนู: ูุณุฎ ูุงูู ูุน AOF</span>
<span class="m">0</span><span class="w"> </span><span class="m">3</span><span class="w"> </span>*<span class="w"> </span>*<span class="w"> </span><span class="m">0</span><span class="w"> </span>/scripts/backup/backup_redis.sh<span class="w"> </span>weekly
</code></pre></div>

<h3 id="4_1">4. ุณูุงุณุฉ ุงูุงุญุชูุงุธ<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ููุน ุงููุณุฎุฉ</th>
<th>ูุฏุฉ ุงูุงุญุชูุงุธ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ูููู (RDB)</td>
<td>7 ุฃูุงู</td>
</tr>
<tr>
<td>ุฃุณุจูุนู (RDB+AOF)</td>
<td>4 ุฃุณุงุจูุน</td>
</tr>
</tbody>
</table>
<h3 id="5_1">5. ุงูุชุญูู<a class="headerlink" href="#5_1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุญุต ููู RDB</span>
redis-check-rdb<span class="w"> </span>/backups/redis/dump.rdb

<span class="c1"># ูุญุต ููู AOF</span>
redis-check-aof<span class="w"> </span>/backups/redis/appendonly.aof

<span class="c1"># ูุญุต ุจุงูุงุณุชุนุงุฏุฉ ูู ุจูุฆุฉ ูููุตูุฉ</span>
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>/backups/redis:/data<span class="w"> </span>redis:7-alpine<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>redis-server<span class="w"> </span>--appendonly<span class="w"> </span>no<span class="w"> </span>--save<span class="w"> </span><span class="s2">&quot;&quot;</span>
</code></pre></div>

<hr />
<h2 id="minio-s3">ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู ูู MinIO / S3<a class="headerlink" href="#minio-s3" title="Permanent link">&para;</a></h2>
<h3 id="1_2">1. ุทุฑู ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#1_2" title="Permanent link">&para;</a></h3>
<h4 id="mirror">ุฃ. ุงููุณุฎ ุงููุชุทุงุจู (Mirror)<a class="headerlink" href="#mirror" title="Permanent link">&para;</a></h4>
<p><strong>ุงูุฃุฏุงุฉ</strong>: <code>mc mirror</code></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุณุฎ ูุชุทุงุจู ุฅูู ูููุน ุฎุงุฑุฌู</span>
mc<span class="w"> </span>mirror<span class="w"> </span>--overwrite<span class="w"> </span>sahool/uploads<span class="w"> </span>s3-backup/sahool-uploads

<span class="c1"># ูุณุฎ ูุชุทุงุจู ูุน ุงูุญุฐู</span>
mc<span class="w"> </span>mirror<span class="w"> </span>--overwrite<span class="w"> </span>--remove<span class="w"> </span>sahool/uploads<span class="w"> </span>s3-backup/sahool-uploads
</code></pre></div>

<h4 id="incremental">ุจ. ุงููุณุฎ ุงููุชุฒุงูุฏ (Incremental)<a class="headerlink" href="#incremental" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุณุฎ ุงููููุงุช ุงูุฌุฏูุฏุฉ ูุงููุญุฏุซุฉ ููุท</span>
mc<span class="w"> </span>mirror<span class="w"> </span>--newer-than<span class="w"> </span>24h<span class="w"> </span>sahool/uploads<span class="w"> </span>s3-backup/sahool-uploads-daily
</code></pre></div>

<h4 id="snapshot">ุฌ. ููุทุฉ ูุงููุฉ (Snapshot)<a class="headerlink" href="#snapshot" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุณุฎ ูุงูู ุจุงูุชุงุฑูุฎ</span>
<span class="nv">BACKUP_DATE</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d<span class="k">)</span>
mc<span class="w"> </span>mirror<span class="w"> </span>sahool/uploads<span class="w"> </span>s3-backup/snapshots/<span class="si">${</span><span class="nv">BACKUP_DATE</span><span class="si">}</span>/uploads
</code></pre></div>

<h3 id="2_1">2. ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุฎุฒูู ูุชุนุฏุฏ ุงูููุงุทู<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุฅุนุฏุงุฏ ููุงูุน ูุชุนุฏุฏุฉ</span>
mc<span class="w"> </span><span class="nb">alias</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>primary<span class="w"> </span>http://minio-primary:9000<span class="w"> </span>ACCESS_KEY<span class="w"> </span>SECRET_KEY
mc<span class="w"> </span><span class="nb">alias</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>backup<span class="w"> </span>http://minio-backup:9000<span class="w"> </span>ACCESS_KEY<span class="w"> </span>SECRET_KEY
mc<span class="w"> </span><span class="nb">alias</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span>aws-s3<span class="w"> </span>https://s3.amazonaws.com<span class="w"> </span>ACCESS_KEY<span class="w"> </span>SECRET_KEY

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู ูุชุนุฏุฏ ุงููุณุชููุงุช</span>
mc<span class="w"> </span>mirror<span class="w"> </span>primary/uploads<span class="w"> </span>backup/uploads<span class="w">              </span><span class="c1"># ูุญูู</span>
mc<span class="w"> </span>mirror<span class="w"> </span>primary/uploads<span class="w"> </span>aws-s3/sahool-backup/uploads<span class="w">  </span><span class="c1"># ุณุญุงุจู</span>
</code></pre></div>

<h3 id="3-versioning">3. ุฅุตุฏุงุฑุงุช ุงููุงุฆูุงุช (Versioning)<a class="headerlink" href="#3-versioning" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุชูุนูู ุงูุฅุตุฏุงุฑุงุช</span>
mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>sahool/uploads

<span class="c1"># ุนุฑุถ ุงูุฅุตุฏุงุฑุงุช</span>
mc<span class="w"> </span>ls<span class="w"> </span>--versions<span class="w"> </span>sahool/uploads/file.pdf

<span class="c1"># ุงุณุชุนุงุฏุฉ ุฅุตุฏุงุฑ ูุฏูู</span>
mc<span class="w"> </span>cp<span class="w"> </span>--version-id<span class="w"> </span>VERSION_ID<span class="w"> </span>sahool/uploads/file.pdf<span class="w"> </span>restored-file.pdf
</code></pre></div>

<h3 id="4-lifecycle">4. ุณูุงุณุฉ ุฏูุฑุฉ ุงูุญูุงุฉ (Lifecycle)<a class="headerlink" href="#4-lifecycle" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุฅูุดุงุก ุณูุงุณุฉ ุฏูุฑุฉ ุงูุญูุงุฉ</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>lifecycle.json<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;Rules&quot;: [</span>
<span class="s">    {</span>
<span class="s">      &quot;ID&quot;: &quot;DeleteOldVersions&quot;,</span>
<span class="s">      &quot;Status&quot;: &quot;Enabled&quot;,</span>
<span class="s">      &quot;NoncurrentVersionExpiration&quot;: {</span>
<span class="s">        &quot;NoncurrentDays&quot;: 90</span>
<span class="s">      }</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">      &quot;ID&quot;: &quot;MoveToGlacier&quot;,</span>
<span class="s">      &quot;Status&quot;: &quot;Enabled&quot;,</span>
<span class="s">      &quot;Transition&quot;: {</span>
<span class="s">        &quot;Days&quot;: 30,</span>
<span class="s">        &quot;StorageClass&quot;: &quot;GLACIER&quot;</span>
<span class="s">      }</span>
<span class="s">    }</span>
<span class="s">  ]</span>
<span class="s">}</span>
<span class="s">EOF</span>

<span class="c1"># ุชุทุจูู ุงูุณูุงุณุฉ</span>
mc<span class="w"> </span>ilm<span class="w"> </span>import<span class="w"> </span>sahool/uploads<span class="w"> </span>&lt;<span class="w"> </span>lifecycle.json
</code></pre></div>

<h3 id="5_2">5. ุงูุฌุฏูู ุงูุฒููู<a class="headerlink" href="#5_2" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ููุน ุงููุณุฎุฉ</th>
<th>ุงูุชูุฑุงุฑ</th>
<th>ุงูููุช</th>
<th>ุงููุฌูุฉ</th>
</tr>
</thead>
<tbody>
<tr>
<td>ูุชุฒุงูุฏ</td>
<td>ูููู</td>
<td>1:00 ุตุจุงุญูุง</td>
<td>MinIO ูุญูู</td>
</tr>
<tr>
<td>ููุทุฉ ูุงููุฉ</td>
<td>ุฃุณุจูุนู</td>
<td>ุงูุฃุญุฏ 2:00 ุตุจุงุญูุง</td>
<td>MinIO ูุญูู + S3</td>
</tr>
<tr>
<td>ุฃุฑุดูู</td>
<td>ุดูุฑู</td>
<td>ุฃูู ููู 3:00 ุตุจุงุญูุง</td>
<td>S3 Glacier</td>
</tr>
</tbody>
</table>
<h3 id="6">6. ุณูุงุณุฉ ุงูุงุญุชูุงุธ<a class="headerlink" href="#6" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุญุฐู ุงููุณุฎ ุงููุฏููุฉ ุชููุงุฆููุง</span>
mc<span class="w"> </span>rm<span class="w"> </span>--recursive<span class="w"> </span>--force<span class="w"> </span>--older-than<span class="w"> </span>30d<span class="w"> </span>backup/daily/
mc<span class="w"> </span>rm<span class="w"> </span>--recursive<span class="w"> </span>--force<span class="w"> </span>--older-than<span class="w"> </span>90d<span class="w"> </span>backup/weekly/
</code></pre></div>

<h3 id="7">7. ุงูุชุญูู ูู ุงูุณูุงูุฉ<a class="headerlink" href="#7" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุญุต ุชูุงูู ุงููููุงุช</span>
mc<span class="w"> </span>admin<span class="w"> </span>heal<span class="w"> </span>sahool

<span class="c1"># ููุงุฑูุฉ ุงูุจูุงูุงุช</span>
mc<span class="w"> </span>diff<span class="w"> </span>sahool/uploads<span class="w"> </span>s3-backup/uploads

<span class="c1"># ุงูุชุญูู ูู ุงูุญุฌู</span>
mc<span class="w"> </span>du<span class="w"> </span>sahool/uploads
mc<span class="w"> </span>du<span class="w"> </span>s3-backup/uploads
</code></pre></div>

<hr />
<h2 id="_6">ุฌุฏูู ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<h3 id="_7">ุฌุฏูู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููุงูู<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
โ ุงููููู      โ ููุน ุงููุณุฎุฉ  โ ุงูุชูุฑุงุฑ โ ุงูููุช      โ ูุฏุฉ ุงูุงุญุชูุงุธ  โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ PostgreSQL  โ ูููู         โ ูููู    โ 2:00 ุต     โ 7 ุฃูุงู        โ
โ             โ ุฃุณุจูุนู       โ ุฃุณุจูุนู  โ ุงูุฃุญุฏ 3 ุต  โ 28 ููู        โ
โ             โ ุดูุฑู         โ ุดูุฑู    โ 1st 4 ุต    โ 365 ููู       โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ Redis       โ ูููู RDB     โ ูููู    โ 2:15 ุต     โ 7 ุฃูุงู        โ
โ             โ ุฃุณุจูุนู ูุงูู โ ุฃุณุจูุนู  โ ุงูุฃุญุฏ 3:15 ุตโ 28 ููู        โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ MinIO       โ ูุชุฒุงูุฏ       โ ูููู    โ 1:00 ุต     โ 30 ููู        โ
โ             โ ููุทุฉ ูุงููุฉ   โ ุฃุณุจูุนู  โ ุงูุฃุญุฏ 2 ุต  โ 90 ููู        โ
โ             โ ุฃุฑุดูู        โ ุดูุฑู    โ 1st 3 ุต    โ 365 ููู       โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ NATS        โ ูููู         โ ูููู    โ 2:30 ุต     โ 7 ุฃูุงู        โ
โโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ Configs     โ ุนูุฏ ุงูุชุบููุฑ โ ุญุณุจ ุงูุญุงุฌุฉโ ุชููุงุฆู    โ 90 ููู        โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโ
</code></pre></div>

<h3 id="crontab">ููู Crontab<a class="headerlink" href="#crontab" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="c1"># SAHOOL Platform Backup Schedule - ุฌุฏูู ุงููุณุฎ ุงูุงุญุชูุงุทู ูููุตุฉ ุณููู</span>
<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>

<span class="n">SHELL</span><span class="o">=/</span><span class="n">bin</span><span class="o">/</span><span class="n">bash</span>
<span class="n">PATH</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="p">:</span><span class="o">/</span><span class="n">bin</span>
<span class="n">MAILTO</span><span class="o">=</span><span class="n">admin</span><span class="err">@</span><span class="n">sahool</span><span class="o">.</span><span class="n">com</span>

<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="c1"># Daily Backups - ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููููู</span>
<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>

<span class="c1"># MinIO - ูู ููู ุงูุณุงุนุฉ 1:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_minio</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">daily</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">minio</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># PostgreSQL - ูู ููู ุงูุณุงุนุฉ 2:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_postgres</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">daily</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">postgres</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># Redis - ูู ููู ุงูุณุงุนุฉ 2:15 ุตุจุงุญูุง</span>
<span class="mi">15</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_redis</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">daily</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">redis</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># NATS - ูู ููู ุงูุณุงุนุฉ 2:30 ุตุจุงุญูุง</span>
<span class="mi">30</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_nats</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">daily</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">nats</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="c1"># Weekly Backups - ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุฃุณุจูุนู</span>
<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>

<span class="c1"># MinIO - ูู ุฃุญุฏ ุงูุณุงุนุฉ 2:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_minio</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">weekly</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">minio</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># PostgreSQL - ูู ุฃุญุฏ ุงูุณุงุนุฉ 3:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_postgres</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">weekly</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">postgres</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># Redis - ูู ุฃุญุฏ ุงูุณุงุนุฉ 3:15 ุตุจุงุญูุง</span>
<span class="mi">15</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_redis</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">weekly</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">redis</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># Backup All - ูู ุฃุญุฏ ุงูุณุงุนุฉ 4:00 ุตุจุงุญูุง (ูุณุฎุฉ ุดุงููุฉ)</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_all</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">weekly</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">all</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="c1"># Monthly Backups - ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุดูุฑู</span>
<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>

<span class="c1"># All services - ุฃูู ููู ูู ุงูุดูุฑ ุงูุณุงุนุฉ 3:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">backup_all</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="n">monthly</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">all</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="c1"># Maintenance Tasks - ููุงู ุงูุตูุงูุฉ</span>
<span class="c1"># โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>

<span class="c1"># Cleanup old backups - ูู ููู ุงูุณุงุนุฉ 5:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">cleanup</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">cleanup</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># Verify backups - ูู ููู ุงูุณุงุนุฉ 6:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">verify</span><span class="o">-</span><span class="n">backup</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">verify</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>

<span class="c1"># Generate backup report - ูู ุงุซููู ุงูุณุงุนุฉ 8:00 ุตุจุงุญูุง</span>
<span class="mi">0</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">generate_report</span><span class="o">.</span><span class="n">sh</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">/</span><span class="k">var</span><span class="o">/</span><span class="nb">log</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">report</span><span class="o">.</span><span class="n">log</span><span class="w"> </span><span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
</code></pre></div>

<hr />
<h2 id="_8">ุฅุฌุฑุงุกุงุช ุงูุงุณุชุนุงุฏุฉ<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<h3 id="1-postgresql">1. ุงุณุชุนุงุฏุฉ PostgreSQL<a class="headerlink" href="#1-postgresql" title="Permanent link">&para;</a></h3>
<h4 id="pg_dump">ุฃ. ุงุณุชุนุงุฏุฉ ูุงููุฉ ูู pg_dump<a class="headerlink" href="#pg_dump" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุงุณุชุนุงุฏุฉ ูุงุนุฏุฉ ุจูุงูุงุช PostgreSQL</span>

<span class="nv">BACKUP_FILE</span><span class="o">=</span><span class="s2">&quot;/backups/postgres/sahool_20250127_020000.dump&quot;</span>

<span class="c1"># 1. ุฅููุงู ุงูุฎุฏูุงุช ุงููุนุชูุฏุฉ</span>
docker<span class="w"> </span>compose<span class="w"> </span>stop<span class="w"> </span>api-gateway<span class="w"> </span>auth-service

<span class="c1"># 2. ุฅุณูุงุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ (ุญุฐุฑ!)</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>sahool-postgres<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;DROP DATABASE IF EXISTS sahool;&quot;</span>

<span class="c1"># 3. ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>sahool-postgres<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;CREATE DATABASE sahool;&quot;</span>

<span class="c1"># 4. ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-i<span class="w"> </span>sahool-postgres<span class="w"> </span>pg_restore<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-U<span class="w"> </span>sahool<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>sahool<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--no-owner<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--no-privileges<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>&lt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BACKUP_FILE</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># 5. ุฅุนุงุฏุฉ ุจูุงุก ุงูููุงุฑุณ</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>sahool-postgres<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-d<span class="w"> </span>sahool<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;REINDEX DATABASE sahool;&quot;</span>

<span class="c1"># 6. ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>sahool-postgres<span class="w"> </span>psql<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-d<span class="w"> </span>sahool<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;ANALYZE;&quot;</span>

<span class="c1"># 7. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุงุช</span>
docker<span class="w"> </span>compose<span class="w"> </span>start<span class="w"> </span>api-gateway<span class="w"> </span>auth-service

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;โ ุชูุช ุงุณุชุนุงุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ&quot;</span>
</code></pre></div>

<h4 id="_9">ุจ. ุงุณุชุนุงุฏุฉ ุฌุฒุฆูุฉ (ุฌุฏูู ูุงุญุฏ)<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงุณุชุนุงุฏุฉ ุฌุฏูู ูุงุญุฏ</span>
pg_restore<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-d<span class="w"> </span>sahool<span class="w"> </span>-t<span class="w"> </span>users<span class="w"> </span>backup.dump

<span class="c1"># ุงุณุชุนุงุฏุฉ ูุฎุทุท ูุญุฏุฏ</span>
pg_restore<span class="w"> </span>-U<span class="w"> </span>sahool<span class="w"> </span>-d<span class="w"> </span>sahool<span class="w"> </span>-n<span class="w"> </span>public<span class="w"> </span>backup.dump
</code></pre></div>

<h4 id="point-in-time-recovery-pitr">ุฌ. Point-in-Time Recovery (PITR)<a class="headerlink" href="#point-in-time-recovery-pitr" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุงุณุชุนุงุฏุฉ ุงููุณุฎุฉ ุงูุฃุณุงุณูุฉ</span>
tar<span class="w"> </span>-xzf<span class="w"> </span>base_backup.tar.gz<span class="w"> </span>-C<span class="w"> </span>/var/lib/postgresql/data

<span class="c1"># 2. ุฅูุดุงุก ููู recovery.conf</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>/var/lib/postgresql/data/recovery.conf<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">restore_command = &#39;cp /var/lib/postgresql/wal_archive/%f %p&#39;</span>
<span class="s">recovery_target_time = &#39;2025-01-27 14:30:00&#39;</span>
<span class="s">recovery_target_action = &#39;promote&#39;</span>
<span class="s">EOF</span>

<span class="c1"># 3. ุฅุนุงุฏุฉ ุชุดุบูู PostgreSQL</span>
docker<span class="w"> </span>compose<span class="w"> </span>restart<span class="w"> </span>postgres
</code></pre></div>

<h3 id="2-redis">2. ุงุณุชุนุงุฏุฉ Redis<a class="headerlink" href="#2-redis" title="Permanent link">&para;</a></h3>
<h4 id="rdb">ุฃ. ุงุณุชุนุงุฏุฉ ูู RDB<a class="headerlink" href="#rdb" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุงุณุชุนุงุฏุฉ Redis ูู RDB</span>

<span class="nv">BACKUP_FILE</span><span class="o">=</span><span class="s2">&quot;/backups/redis/dump_20250127.rdb&quot;</span>

<span class="c1"># 1. ุฅููุงู Redis</span>
docker<span class="w"> </span>compose<span class="w"> </span>stop<span class="w"> </span>redis

<span class="c1"># 2. ูุณุฎ ููู RDB</span>
docker<span class="w"> </span>cp<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BACKUP_FILE</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>sahool-redis:/data/dump.rdb

<span class="c1"># 3. ุชุนููู ุงูุตูุงุญูุงุช</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sahool-redis<span class="w"> </span>chown<span class="w"> </span>redis:redis<span class="w"> </span>/data/dump.rdb

<span class="c1"># 4. ุฅุนุงุฏุฉ ุชุดุบูู Redis</span>
docker<span class="w"> </span>compose<span class="w"> </span>start<span class="w"> </span>redis

<span class="c1"># 5. ุงูุชุญูู</span>
sleep<span class="w"> </span><span class="m">5</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sahool-redis<span class="w"> </span>redis-cli<span class="w"> </span>-a<span class="w"> </span><span class="nv">$REDIS_PASSWORD</span><span class="w"> </span>DBSIZE

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;โ ุชูุช ุงุณุชุนุงุฏุฉ Redis ุจูุฌุงุญ&quot;</span>
</code></pre></div>

<h4 id="aof">ุจ. ุงุณุชุนุงุฏุฉ ูู AOF<a class="headerlink" href="#aof" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุฅููุงู Redis</span>
docker<span class="w"> </span>compose<span class="w"> </span>stop<span class="w"> </span>redis

<span class="c1"># 2. ูุณุฎ ููู AOF</span>
docker<span class="w"> </span>cp<span class="w"> </span>/backups/redis/appendonly.aof<span class="w"> </span>sahool-redis:/data/

<span class="c1"># 3. ุฅุนุงุฏุฉ ุชุดุบูู ูุน ุชูุนูู AOF</span>
docker<span class="w"> </span>compose<span class="w"> </span>start<span class="w"> </span>redis

<span class="c1"># 4. ุฅุนุงุฏุฉ ุจูุงุก RDB ูู AOF</span>
docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sahool-redis<span class="w"> </span>redis-cli<span class="w"> </span>-a<span class="w"> </span><span class="nv">$REDIS_PASSWORD</span><span class="w"> </span>BGREWRITEAOF
</code></pre></div>

<h3 id="3-minio">3. ุงุณุชุนุงุฏุฉ MinIO<a class="headerlink" href="#3-minio" title="Permanent link">&para;</a></h3>
<h4 id="_10">ุฃ. ุงุณุชุนุงุฏุฉ ูุงููุฉ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุงุณุชุนุงุฏุฉ MinIO ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ</span>

<span class="nv">SOURCE_ALIAS</span><span class="o">=</span><span class="s2">&quot;backup&quot;</span>
<span class="nv">TARGET_ALIAS</span><span class="o">=</span><span class="s2">&quot;sahool&quot;</span>
<span class="nv">BUCKET</span><span class="o">=</span><span class="s2">&quot;uploads&quot;</span>

<span class="c1"># 1. ุญุฐู ุงูุจูุงูุงุช ุงูุญุงููุฉ (ุงุฎุชูุงุฑู)</span>
mc<span class="w"> </span>rm<span class="w"> </span>--recursive<span class="w"> </span>--force<span class="w"> </span><span class="si">${</span><span class="nv">TARGET_ALIAS</span><span class="si">}</span>/<span class="si">${</span><span class="nv">BUCKET</span><span class="si">}</span>/

<span class="c1"># 2. ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ</span>
mc<span class="w"> </span>mirror<span class="w"> </span>--overwrite<span class="w"> </span><span class="si">${</span><span class="nv">SOURCE_ALIAS</span><span class="si">}</span>/<span class="si">${</span><span class="nv">BUCKET</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">TARGET_ALIAS</span><span class="si">}</span>/<span class="si">${</span><span class="nv">BUCKET</span><span class="si">}</span>

<span class="c1"># 3. ุงูุชุญูู</span>
mc<span class="w"> </span>ls<span class="w"> </span><span class="si">${</span><span class="nv">TARGET_ALIAS</span><span class="si">}</span>/<span class="si">${</span><span class="nv">BUCKET</span><span class="si">}</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;โ ุชูุช ุงุณุชุนุงุฏุฉ MinIO ุจูุฌุงุญ&quot;</span>
</code></pre></div>

<h4 id="_11">ุจ. ุงุณุชุนุงุฏุฉ ููู ูุญุฏุฏ<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงุณุชุนุงุฏุฉ ููู ูุงุญุฏ</span>
mc<span class="w"> </span>cp<span class="w"> </span>backup/uploads/important-file.pdf<span class="w"> </span>sahool/uploads/

<span class="c1"># ุงุณุชุนุงุฏุฉ ูุฌูุฏ ูุญุฏุฏ</span>
mc<span class="w"> </span>mirror<span class="w"> </span>backup/uploads/documents/<span class="w"> </span>sahool/uploads/documents/
</code></pre></div>

<h4 id="_12">ุฌ. ุงุณุชุนุงุฏุฉ ุฅุตุฏุงุฑ ูุฏูู<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุนุฑุถ ุงูุฅุตุฏุงุฑุงุช</span>
mc<span class="w"> </span>ls<span class="w"> </span>--versions<span class="w"> </span>sahool/uploads/document.pdf

<span class="c1"># ุงุณุชุนุงุฏุฉ ุฅุตุฏุงุฑ ูุญุฏุฏ</span>
<span class="nv">VERSION_ID</span><span class="o">=</span><span class="s2">&quot;xxxxx-xxxxx-xxxxx&quot;</span>
mc<span class="w"> </span>cp<span class="w"> </span>--version-id<span class="w"> </span><span class="si">${</span><span class="nv">VERSION_ID</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sahool/uploads/document.pdf<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sahool/uploads/document_restored.pdf
</code></pre></div>

<h3 id="4_2">4. ุฎุทุฉ ุงูุชุนุงูู ุงููุงูู ูู ุงูููุงุฑุซ<a class="headerlink" href="#4_2" title="Permanent link">&para;</a></h3>
<h4 id="1-0-15">ุงููุฑุญูุฉ 1: ุงูุชูููู (0-15 ุฏูููุฉ)<a class="headerlink" href="#1-0-15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุชูููู ูุฏู ุงูุถุฑุฑ</span>
/scripts/disaster-recovery/assess.sh

<span class="c1"># 2. ุชุญุฏูุฏ ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุตุงูุญุฉ</span>
/scripts/disaster-recovery/find-latest-backup.sh

<span class="c1"># 3. ุฅุดุนุงุฑ ุงููุฑูู</span>
/scripts/disaster-recovery/notify-team.sh
</code></pre></div>

<h4 id="2-15-30">ุงููุฑุญูุฉ 2: ุงูุชุญุถูุฑ (15-30 ุฏูููุฉ)<a class="headerlink" href="#2-15-30" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุฅููุงู ุฌููุน ุงูุฎุฏูุงุช</span>
docker<span class="w"> </span>compose<span class="w"> </span>down

<span class="c1"># 2. ูุณุฎ ุงุญุชูุงุทู ููุญุงูุฉ ุงูุญุงููุฉ (ููุชุญููู)</span>
/scripts/disaster-recovery/backup-current-state.sh

<span class="c1"># 3. ุชูุธูู ุงูุจูุฆุฉ</span>
/scripts/disaster-recovery/cleanup.sh
</code></pre></div>

<h4 id="3-30-2">ุงููุฑุญูุฉ 3: ุงูุงุณุชุนุงุฏุฉ (30 ุฏูููุฉ - 2 ุณุงุนุฉ)<a class="headerlink" href="#3-30-2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุงุณุชุนุงุฏุฉ PostgreSQL</span>
/scripts/backup/restore_postgres.sh<span class="w"> </span>/backups/latest/postgres.dump

<span class="c1"># 2. ุงุณุชุนุงุฏุฉ Redis</span>
/scripts/backup/restore_redis.sh<span class="w"> </span>/backups/latest/redis.rdb

<span class="c1"># 3. ุงุณุชุนุงุฏุฉ MinIO</span>
/scripts/backup/restore_minio.sh<span class="w"> </span>/backups/latest/minio

<span class="c1"># 4. ุงุณุชุนุงุฏุฉ ุงูุฅุนุฏุงุฏุงุช</span>
/scripts/backup/restore_configs.sh
</code></pre></div>

<h4 id="4-2-3">ุงููุฑุญูุฉ 4: ุงูุชุญูู (2-3 ุณุงุนุงุช)<a class="headerlink" href="#4-2-3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุงูุชุญูู ูู ููุงุนุฏ ุงูุจูุงูุงุช</span>
/scripts/disaster-recovery/verify-databases.sh

<span class="c1"># 2. ุงูุชุญูู ูู ุงูุฎุฏูุงุช</span>
/scripts/disaster-recovery/verify-services.sh

<span class="c1"># 3. ุงุฎุชุจุงุฑ ูุธููู</span>
/scripts/disaster-recovery/functional-tests.sh
</code></pre></div>

<h4 id="5-3-4">ุงููุฑุญูุฉ 5: ุงูุนูุฏุฉ ููุนูู (3-4 ุณุงุนุงุช)<a class="headerlink" href="#5-3-4" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุงุช ุจุงูุชุฑุชูุจ</span>
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>postgres<span class="w"> </span>redis<span class="w"> </span>nats
sleep<span class="w"> </span><span class="m">30</span>
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d<span class="w"> </span>api-gateway
docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d

<span class="c1"># 2. ูุฑุงูุจุฉ ุงูุณุฌูุงุช</span>
/scripts/disaster-recovery/monitor-logs.sh

<span class="c1"># 3. ุฅุดุนุงุฑ ุจุงูุนูุฏุฉ ููุนูู</span>
/scripts/disaster-recovery/notify-recovery-complete.sh
</code></pre></div>

<h3 id="5_3">5. ุณููุงุฑูููุงุช ุงูุงุณุชุนุงุฏุฉ ุงูุดุงุฆุนุฉ<a class="headerlink" href="#5_3" title="Permanent link">&para;</a></h3>
<h4 id="1_3">ุณููุงุฑูู 1: ุญุฐู ุจูุงูุงุช ุนู ุทุฑูู ุงูุฎุทุฃ<a class="headerlink" href="#1_3" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงุณุชุนุงุฏุฉ ูู ุขุฎุฑ ูุณุฎุฉ ููููุฉ (ุนุงุฏุฉ &lt; 24 ุณุงุนุฉ)</span>
<span class="nv">LATEST_BACKUP</span><span class="o">=</span><span class="k">$(</span>ls<span class="w"> </span>-t<span class="w"> </span>/backups/daily/postgres/*.dump<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="k">)</span>
/scripts/backup/restore_postgres.sh<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">LATEST_BACKUP</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<h4 id="2_2">ุณููุงุฑูู 2: ูุดู ูู ุงูุฃุฌูุฒุฉ<a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงุณุชุนุงุฏุฉ ูุงููุฉ ุนูู ุฎุงุฏู ุฌุฏูุฏ</span>
./scripts/disaster-recovery/full-restore.sh<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--backup-date<span class="w"> </span><span class="m">20250127</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--new-server<span class="w"> </span>server2.sahool.com
</code></pre></div>

<h4 id="3_2">ุณููุงุฑูู 3: ูุฌูู ุจุฑูุฌูุงุช ุฎุจูุซุฉ<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงุณุชุนุงุฏุฉ ูู ูุณุฎุฉ ูุจู ุงููุฌูู</span>
./scripts/disaster-recovery/restore-clean-state.sh<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--date<span class="w"> </span><span class="s2">&quot;2025-01-25 10:00:00&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--verify-integrity
</code></pre></div>

<hr />
<h2 id="_13">ุงููุฑุงูุจุฉ ูุงูุฅุดุนุงุฑุงุช<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<h3 id="1_4">1. ูุฑุงูุจุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#1_4" title="Permanent link">&para;</a></h3>
<h4 id="_14">ุฃ. ููุงููุณ ุงููุฑุงูุจุฉ<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุญุฌู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ</span>
du<span class="w"> </span>-sh<span class="w"> </span>/backups/*

<span class="c1"># ุนุฏุฏ ุงููุณุฎ ุงููุงุฌุญุฉ/ุงููุงุดูุฉ</span>
grep<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SUCCESS&quot;</span><span class="w"> </span>/var/log/backup/*.log
grep<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;ERROR&quot;</span><span class="w"> </span>/var/log/backup/*.log

<span class="c1"># ููุช ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</span>
stat<span class="w"> </span>-c<span class="w"> </span>%y<span class="w"> </span>/backups/latest/postgres.dump

<span class="c1"># ูุนุฏู ูุฌุงุญ ุงููุณุฎ ุงูุงุญุชูุงุทู (ุขุฎุฑ 30 ููู)</span>
./scripts/monitoring/backup-success-rate.sh<span class="w"> </span><span class="m">30</span>
</code></pre></div>

<h4 id="grafana">ุจ. ููุญุฉ Grafana<a class="headerlink" href="#grafana" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุซุงู ุนูู ุงุณุชุนูุงู Prometheus</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup_success_rate</span>
<span class="w">  </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">sum(rate(backup_success_total[24h])) /</span>
<span class="w">    </span><span class="no">sum(rate(backup_attempts_total[24h])) * 100</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup_duration_seconds</span>
<span class="w">  </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">histogram_quantile(0.95, backup_duration_seconds_bucket)</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup_size_bytes</span>
<span class="w">  </span><span class="nt">expr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">backup_size_bytes</span>
</code></pre></div>

<h3 id="2_3">2. ูุธุงู ุงูุฅุดุนุงุฑุงุช<a class="headerlink" href="#2_3" title="Permanent link">&para;</a></h3>
<h4 id="_15">ุฃ. ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูู ุญุงูุฉ ุงููุฌุงุญ</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>/tmp/backup_success.txt<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">Subject: โ ูุฌุงุญ ุงููุณุฎ ุงูุงุญุชูุงุทู - SAHOOL Platform</span>

<span class="s">ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ: daily_20250127_020000</span>
<span class="s">ุงูุชุงุฑูุฎ: 2025-01-27 02:15:00</span>
<span class="s">ุงูุญุงูุฉ: ูุฌุญุช โ</span>

<span class="s">ุงูุชูุงุตูู:</span>
<span class="s">- PostgreSQL: 2.3 GB (ูุฌุญ)</span>
<span class="s">- Redis: 450 MB (ูุฌุญ)</span>
<span class="s">- MinIO: 15.7 GB (ูุฌุญ)</span>

<span class="s">ูุฏุฉ ุงูุชูููุฐ: 18 ุฏูููุฉ</span>
<span class="s">ุงููุฌูุฉ: MinIO + AWS S3</span>
<span class="s">EOF</span>

sendmail<span class="w"> </span>-t<span class="w"> </span>&lt;<span class="w"> </span>/tmp/backup_success.txt

<span class="c1"># ูู ุญุงูุฉ ุงููุดู</span>
cat<span class="w"> </span>&gt;<span class="w"> </span>/tmp/backup_failure.txt<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">Subject: โ๏ธ ูุดู ุงููุณุฎ ุงูุงุญุชูุงุทู - ุชุญุชุงุฌ ุชุฏุฎู ููุฑู</span>

<span class="s">ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ: daily_20250127_020000</span>
<span class="s">ุงูุชุงุฑูุฎ: 2025-01-27 02:15:00</span>
<span class="s">ุงูุญุงูุฉ: ูุดูุช โ</span>

<span class="s">ุงูุฎุทุฃ:</span>
<span class="s">PostgreSQL backup failed: Connection timeout</span>

<span class="s">ุงูุฅุฌุฑุงุก ุงููุทููุจ:</span>
<span class="s">1. ุงูุชุญูู ูู ุญุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช</span>
<span class="s">2. ุฅุนุงุฏุฉ ุงููุญุงููุฉ ูุฏูููุง</span>
<span class="s">3. ุงูุชุญูู ูู ุงูุณุฌูุงุช</span>

<span class="s">ุงูุณุฌูุงุช: /var/log/backup/postgres_20250127.log</span>
<span class="s">EOF</span>

sendmail<span class="w"> </span>-t<span class="w"> </span>&lt;<span class="w"> </span>/tmp/backup_failure.txt
</code></pre></div>

<h4 id="slack">ุจ. ุฅุดุนุงุฑุงุช Slack<a class="headerlink" href="#slack" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุฅุฑุณุงู ุฅุดุนุงุฑ ุฅูู Slack</span>

<span class="nv">WEBHOOK_URL</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">SLACK_WEBHOOK_URL</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nv">STATUS</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># success or failure</span>
<span class="nv">MESSAGE</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$2</span><span class="s2">&quot;</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$STATUS</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nv">COLOR</span><span class="o">=</span><span class="s2">&quot;good&quot;</span>
<span class="w">  </span><span class="nv">EMOJI</span><span class="o">=</span><span class="s2">&quot;:white_check_mark:&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="nv">COLOR</span><span class="o">=</span><span class="s2">&quot;danger&quot;</span>
<span class="w">  </span><span class="nv">EMOJI</span><span class="o">=</span><span class="s2">&quot;:x:&quot;</span>
<span class="k">fi</span>

curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">WEBHOOK_URL</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>@-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;attachments&quot;: [</span>
<span class="s">    {</span>
<span class="s">      &quot;color&quot;: &quot;${COLOR}&quot;,</span>
<span class="s">      &quot;title&quot;: &quot;${EMOJI} SAHOOL Platform Backup&quot;,</span>
<span class="s">      &quot;text&quot;: &quot;${MESSAGE}&quot;,</span>
<span class="s">      &quot;footer&quot;: &quot;Backup System&quot;,</span>
<span class="s">      &quot;ts&quot;: $(date +%s)</span>
<span class="s">    }</span>
<span class="s">  ]</span>
<span class="s">}</span>
<span class="s">EOF</span>
</code></pre></div>

<h4 id="pagerduty">ุฌ. ุฅุดุนุงุฑุงุช PagerDuty (ููุญุงูุงุช ุงูุญุฑุฌุฉ)<a class="headerlink" href="#pagerduty" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุฅูุดุงุก ุญุงุฏุซุฉ ูู PagerDuty</span>

curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>https://api.pagerduty.com/incidents<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Authorization: Token token=YOUR_API_TOKEN&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span>@-<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">{</span>
<span class="s">  &quot;incident&quot;: {</span>
<span class="s">    &quot;type&quot;: &quot;incident&quot;,</span>
<span class="s">    &quot;title&quot;: &quot;ูุดู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุญุฑุฌ - SAHOOL Platform&quot;,</span>
<span class="s">    &quot;service&quot;: {</span>
<span class="s">      &quot;id&quot;: &quot;SERVICE_ID&quot;,</span>
<span class="s">      &quot;type&quot;: &quot;service_reference&quot;</span>
<span class="s">    },</span>
<span class="s">    &quot;urgency&quot;: &quot;high&quot;,</span>
<span class="s">    &quot;body&quot;: {</span>
<span class="s">      &quot;type&quot;: &quot;incident_body&quot;,</span>
<span class="s">      &quot;details&quot;: &quot;ูุดูุช ุฌููุน ูุญุงููุงุช ุงููุณุฎ ุงูุงุญุชูุงุทู ูู PostgreSQL&quot;</span>
<span class="s">    }</span>
<span class="s">  }</span>
<span class="s">}</span>
<span class="s">EOF</span>
</code></pre></div>

<h3 id="3_3">3. ุชูุงุฑูุฑ ุฏูุฑูุฉ<a class="headerlink" href="#3_3" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุชูุฑูุฑ ุฃุณุจูุนู ูููุณุฎ ุงูุงุญุชูุงุทู</span>

cat<span class="w"> </span>&gt;<span class="w"> </span>/tmp/weekly_backup_report.txt<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="s">ุงูุชูุฑูุฑ ุงูุฃุณุจูุนู ูููุณุฎ ุงูุงุญุชูุงุทู - SAHOOL Platform</span>
<span class="s">ุงูุฃุณุจูุน: $(date +%V) ูู $(date +%Y)</span>
<span class="s">ุงูุชุงุฑูุฎ: $(date +%Y-%m-%d)</span>
<span class="s">โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>

<span class="s">๐ ุฅุญุตุงุฆูุงุช ุงููุณุฎ ุงูุงุญุชูุงุทู:</span>
<span class="s">โโโโโโโโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโโโโโ</span>
<span class="s">โ ุงููููู         โ ูุงุฌุญ   โ ูุงุดู    โ ูุนุฏู ุงููุฌุงุญ โ</span>
<span class="s">โโโโโโโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโโโโโค</span>
<span class="s">โ PostgreSQL     โ 7/7     โ 0       โ 100%         โ</span>
<span class="s">โ Redis          โ 7/7     โ 0       โ 100%         โ</span>
<span class="s">โ MinIO          โ 7/7     โ 0       โ 100%         โ</span>
<span class="s">โ NATS           โ 7/7     โ 0       โ 100%         โ</span>
<span class="s">โโโโโโโโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโโโโโ</span>

<span class="s">๐พ ุฃุญุฌุงู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:</span>
<span class="s">- PostgreSQL: ูุชูุณุท 2.4 GB</span>
<span class="s">- Redis: ูุชูุณุท 460 MB</span>
<span class="s">- MinIO: ูุชูุณุท 16.2 GB</span>
<span class="s">- ุฅุฌูุงูู: 19.06 GB</span>

<span class="s">โฑ๏ธ ุฃููุงุช ุงูุชูููุฐ:</span>
<span class="s">- ุฃุณุฑุน: 12 ุฏูููุฉ (PostgreSQL)</span>
<span class="s">- ุฃุจุทุฃ: 25 ุฏูููุฉ (MinIO)</span>
<span class="s">- ูุชูุณุท: 18 ุฏูููุฉ</span>

<span class="s">๐๏ธ ุงูุชุฎุฒูู:</span>
<span class="s">- ุงููุณุงุญุฉ ุงููุณุชุฎุฏูุฉ: 85.3 GB / 500 GB (17%)</span>
<span class="s">- ุงููุณุฎ ุงููุฏููุฉ ุงููุญุฐููุฉ: 12 ูุณุฎุฉ</span>
<span class="s">- ุงููุณุงุญุฉ ุงููุชููุฑุฉ: 414.7 GB</span>

<span class="s">โ ุงูุฅุฌุฑุงุกุงุช ุงูููุตู ุจูุง:</span>
<span class="s">- ูุง ุชูุฌุฏ ูุดุงูู ุญุงููุฉ</span>
<span class="s">- ุงููุธุงู ูุนูู ุจุดูู ูุซุงูู</span>

<span class="s">โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ</span>
<span class="s">ุชู ุฅูุดุงุก ุงูุชูุฑูุฑ ุชููุงุฆููุง ุจูุงุณุทุฉ ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู</span>
<span class="s">EOF</span>

<span class="c1"># ุฅุฑุณุงู ุงูุชูุฑูุฑ</span>
sendmail<span class="w"> </span>admin@sahool.com<span class="w"> </span>&lt;<span class="w"> </span>/tmp/weekly_backup_report.txt
</code></pre></div>

<hr />
<h2 id="_16">ุงูุฃูุงู ูุฃูุถู ุงูููุงุฑุณุงุช<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<h3 id="1_5">1. ุชุดููุฑ ุงูุจูุงูุงุช<a class="headerlink" href="#1_5" title="Permanent link">&para;</a></h3>
<h4 id="_17">ุฃ. ุชุดููุฑ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุชุดููุฑ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุจุงุณุชุฎุฏุงู GPG</span>

<span class="nv">BACKUP_FILE</span><span class="o">=</span><span class="s2">&quot;sahool_backup.sql&quot;</span>
<span class="nv">GPG_KEY</span><span class="o">=</span><span class="s2">&quot;admin@sahool.com&quot;</span>

<span class="c1"># ุชุดููุฑ</span>
gpg<span class="w"> </span>--encrypt<span class="w"> </span>--recipient<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">GPG_KEY</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BACKUP_FILE</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># ูู ุงูุชุดููุฑ</span>
gpg<span class="w"> </span>--decrypt<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BACKUP_FILE</span><span class="si">}</span><span class="s2">.gpg&quot;</span><span class="w"> </span>&gt;<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">BACKUP_FILE</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>

<h4 id="_18">ุจ. ุชุดููุฑ ุงูููู<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ููู ุขูู ุนุจุฑ SSH</span>
scp<span class="w"> </span>-i<span class="w"> </span>~/.ssh/backup_key<span class="w"> </span>backup.sql<span class="w"> </span>user@backup-server:/backups/

<span class="c1"># ุฑูุน ูุดูุฑ ุฅูู S3</span>
aws<span class="w"> </span>s3<span class="w"> </span>cp<span class="w"> </span>backup.sql<span class="w"> </span>s3://bucket/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--sse<span class="w"> </span>AES256<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--storage-class<span class="w"> </span>GLACIER
</code></pre></div>

<h3 id="2_4">2. ุงูุชุญูู ูู ุงููุตูู<a class="headerlink" href="#2_4" title="Permanent link">&para;</a></h3>
<h4 id="_19">ุฃ. ุตูุงุญูุงุช ุงููููุงุช<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุชุนููู ุตูุงุญูุงุช ุขููุฉ</span>
chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/backups/*.dump
chmod<span class="w"> </span><span class="m">700</span><span class="w"> </span>/backups/
chown<span class="w"> </span>backup:backup<span class="w"> </span>/backups/

<span class="c1"># ููุน ุงููุตูู ุงูุนุงู</span>
chmod<span class="w"> </span>o-rwx<span class="w"> </span>/backups/*
</code></pre></div>

<h4 id="_20">ุจ. ุฅุฏุงุฑุฉ ุงูููุงุชูุญ<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุชุฎุฒูู ุงูููุงุชูุญ ูู Vault</span>
vault<span class="w"> </span>kv<span class="w"> </span>put<span class="w"> </span>secret/backup/postgres<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">username</span><span class="o">=</span>sahool<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="nv">password</span><span class="o">=</span>secure_password

<span class="c1"># ุงุณุชุฑุฌุงุน ุงูููุงุชูุญ</span>
<span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span><span class="k">$(</span>vault<span class="w"> </span>kv<span class="w"> </span>get<span class="w"> </span>-field<span class="o">=</span>password<span class="w"> </span>secret/backup/postgres<span class="k">)</span>
</code></pre></div>

<h3 id="3_4">3. ุงูุชุฏููู ูุงูุชุชุจุน<a class="headerlink" href="#3_4" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุชุณุฌูู ุฌููุน ุนูููุงุช ุงููุณุฎ ุงูุงุญุชูุงุทู</span>
cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/backup/audit.log<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">[$(date +%Y-%m-%d\ %H:%M:%S)] BACKUP_START user=${USER} type=daily</span>
<span class="s">[$(date +%Y-%m-%d\ %H:%M:%S)] BACKUP_SUCCESS size=2.3GB duration=15m</span>
<span class="s">[$(date +%Y-%m-%d\ %H:%M:%S)] UPLOAD_S3 destination=s3://sahool-backups</span>
<span class="s">EOF</span>
</code></pre></div>

<h3 id="4_3">4. ุงูุงุฎุชุจุงุฑ ุงูููุชุธู<a class="headerlink" href="#4_3" title="Permanent link">&para;</a></h3>
<h4 id="_21">ุฃ. ุงุฎุชุจุงุฑ ุดูุฑู ููุงุณุชุนุงุฏุฉ<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># ุงุฎุชุจุงุฑ ุงูุงุณุชุนุงุฏุฉ ูู ุจูุฆุฉ ูููุตูุฉ</span>

<span class="nv">TEST_DATE</span><span class="o">=</span><span class="k">$(</span>date<span class="w"> </span>+%Y%m%d<span class="k">)</span>
<span class="nv">TEST_DB</span><span class="o">=</span><span class="s2">&quot;sahool_test_</span><span class="si">${</span><span class="nv">TEST_DATE</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># 1. ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุงุฎุชุจุงุฑ</span>
createdb<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TEST_DB</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># 2. ุงุณุชุนุงุฏุฉ ูู ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</span>
pg_restore<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TEST_DB</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>/backups/latest/postgres.dump

<span class="c1"># 3. ุงูุชุญูู ูู ุงูุจูุงูุงุช</span>
psql<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TEST_DB</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT COUNT(*) FROM users;&quot;</span>
psql<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TEST_DB</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;SELECT COUNT(*) FROM farms;&quot;</span>

<span class="c1"># 4. ุชูุธูู</span>
dropdb<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">TEST_DB</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;โ ุงุฎุชุจุงุฑ ุงูุงุณุชุนุงุฏุฉ ูุฌุญ&quot;</span>
</code></pre></div>

<h3 id="5_4">5. ุงูุชูุซูู ูุงูุชุฏุฑูุจ<a class="headerlink" href="#5_4" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ุฏููู ุงูุงุณุชุนุงุฏุฉ</strong>: ุชูุซูู ููุตู ูุฌููุน ุณููุงุฑูููุงุช ุงูุงุณุชุนุงุฏุฉ</li>
<li><strong>ุฌูุณุงุช ุชุฏุฑูุจูุฉ</strong>: ุฑุจุน ุณูููุฉ ููุฑูู ุงูุนูููุงุช</li>
<li><strong>ุชูุงุฑูู ูุญุงูุงุฉ</strong>: ูุญุงูุงุฉ ููุงุฑุซ ููุชุฏุฑูุจ</li>
<li><strong>ูุงุฆูุฉ ุฌูุงุช ุงูุงุชุตุงู</strong>: ูุงุฆูุฉ ูุญุฏุซุฉ ููุทูุงุฑุฆ</li>
</ul>
<h3 id="6_1">6. ุงููุฑุงุฌุนุฉ ูุงูุชุญุณูู ุงููุณุชูุฑ<a class="headerlink" href="#6_1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุฑุงุฌุนุฉ ุฑุจุน ุณูููุฉ</span>
-<span class="w"> </span>ูุฑุงุฌุนุฉ<span class="w"> </span>ุณูุงุณุฉ<span class="w"> </span>ุงูุงุญุชูุงุธ
-<span class="w"> </span>ุชูููู<span class="w"> </span>ุฃููุงุช<span class="w"> </span>ุงูุงุณุชุนุงุฏุฉ
-<span class="w"> </span>ุชุญุฏูุซ<span class="w"> </span>ุงููุซุงุฆู
-<span class="w"> </span>ุงุฎุชุจุงุฑ<span class="w"> </span>ุฎุทุฉ<span class="w"> </span>ุงูุชุนุงูู<span class="w"> </span>ูู<span class="w"> </span>ุงูููุงุฑุซ
-<span class="w"> </span>ูุฑุงุฌุนุฉ<span class="w"> </span>ุณุนุงุช<span class="w"> </span>ุงูุชุฎุฒูู
</code></pre></div>

<hr />
<h2 id="_22">ููุญู: ุฃูุงูุฑ ุณุฑูุนุฉ<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<h3 id="_23">ูุณุฎ ุงุญุชูุงุทู ูุฏูู ุณุฑูุน<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ูุณุฎ ุงุญุชูุงุทู ุดุงูู ูุฌููุน ุงูููููุงุช</span>
/scripts/backup/backup_all.sh<span class="w"> </span>manual

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู PostgreSQL ููุท</span>
/scripts/backup/backup_postgres.sh<span class="w"> </span>manual

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู Redis ููุท</span>
/scripts/backup/backup_redis.sh<span class="w"> </span>manual

<span class="c1"># ูุณุฎ ุงุญุชูุงุทู MinIO ููุท</span>
/scripts/backup/backup_minio.sh<span class="w"> </span>manual
</code></pre></div>

<h3 id="_24">ุงูุชุญูู ูู ุญุงูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุญุงูุฉ ุขุฎุฑ ูุณุฎุฉ ุงุญุชูุงุทูุฉ</span>
/scripts/backup/status.sh

<span class="c1"># ุงูุชุญูู ูู ุตุญุฉ ุงููุณุฎุฉ</span>
/scripts/backup/verify-backup.sh<span class="w"> </span>/backups/latest

<span class="c1"># ุนุฑุถ ุงูุณุฌูุงุช</span>
tail<span class="w"> </span>-f<span class="w"> </span>/var/log/backup/*.log
</code></pre></div>

<h3 id="_25">ุงุณุชุนุงุฏุฉ ุณุฑูุนุฉ<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุงุณุชุนุงุฏุฉ PostgreSQL ูู ุขุฎุฑ ูุณุฎุฉ</span>
/scripts/backup/restore_postgres.sh<span class="w"> </span>--latest

<span class="c1"># ุงุณุชุนุงุฏุฉ Redis ูู ุขุฎุฑ ูุณุฎุฉ</span>
/scripts/backup/restore_redis.sh<span class="w"> </span>--latest

<span class="c1"># ุงุณุชุนุงุฏุฉ ูุงููุฉ</span>
/scripts/disaster-recovery/full-restore.sh<span class="w"> </span>--latest
</code></pre></div>

<hr />
<h2 id="_26">ุงูุฏุนู ูุงููุณุงุนุฏุฉ<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h2>
<h3 id="_27">ุฌูุงุช ุงูุงุชุตุงู<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ุงูุฏุนู ุงูููู</strong>: support@sahool.com</li>
<li><strong>ุงูุทูุงุฑุฆ</strong>: +966-XX-XXX-XXXX</li>
<li><strong>ูุฑูู DevOps</strong>: devops@sahool.com</li>
</ul>
<h3 id="_28">ุงูููุงุฑุฏ<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ุงููุซุงุฆู</strong>: https://docs.sahool.com/backup</li>
<li><strong>ุงูุฃุฏูุงุช</strong>: /scripts/backup/</li>
<li><strong>ุงูุณุฌูุงุช</strong>: /var/log/backup/</li>
<li><strong>ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ</strong>: /backups/</li>
</ul>
<h3 id="_29">ุงูุฅุจูุงุบ ุนู ุงููุดุงูู<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ุฅูุดุงุก ุชุฐูุฑุฉ ุฏุนู ุชููุงุฆููุง</span>
/scripts/support/create-ticket.sh<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--category<span class="w"> </span>backup<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--priority<span class="w"> </span>high<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--description<span class="w"> </span><span class="s2">&quot;ูุดู ุงููุณุฎ ุงูุงุญุชูุงุทู&quot;</span>
</code></pre></div>

<hr />
<p><strong>ุขุฎุฑ ุชุญุฏูุซ</strong>: 2025-12-27
<strong>ุงูุฅุตุฏุงุฑ</strong>: 1.0.0
<strong>ุงููุณุคูู</strong>: ูุฑูู ุงูุจููุฉ ุงูุชุญุชูุฉ - SAHOOL Platform</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "search.suggest", "search.highlight"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>