apiVersion: v1
kind: ConfigMap
metadata:
  name: backstage-config
  namespace: backstage
data:
  app-config.yaml: |
    app:
      title: SAHOOL Developer Portal
      baseUrl: http://localhost:7007
    
    organization:
      name: SAHOOL
    
    backend:
      baseUrl: http://localhost:7007
      listen:
        port: 7007
      cors:
        origin: http://localhost:7007
        methods: [GET, POST, PUT, DELETE]
        credentials: true
    
    catalog:
      rules:
        - allow: [Component, System, API, Resource, Location, Group, User, Domain]
      locations:
        - type: file
          target: ./catalog/all.yaml
    
    integrations:
      github:
        - host: github.com
          token: ${GITHUB_TOKEN}
    
    kubernetes:
      serviceLocatorMethod:
        type: multiTenant
      clusterLocatorMethods:
        - type: config
          clusters:
            - name: sahool-dev
              url: ${K8S_CLUSTER_URL}
              authProvider: serviceAccount
              serviceAccountToken: ${K8S_SA_TOKEN}
              # TLS verification enabled for security - use caData or caFile in production
              skipTLSVerify: false
              # Uncomment and configure for production:
              # caData: ${K8S_CA_DATA}  # Base64 encoded CA certificate
              # caFile: /etc/backstage/k8s-ca.crt