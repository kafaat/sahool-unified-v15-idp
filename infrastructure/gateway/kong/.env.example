# ============================================================================
# SAHOOL Platform - Kong API Gateway Environment Variables
# منصة سهول - متغيرات بيئة بوابة Kong API
# ============================================================================
# Copy this file to .env and update with your actual values
# انسخ هذا الملف إلى .env وقم بتحديث القيم الفعلية
# ============================================================================

# ============================================================================
# Kong Database Configuration
# تكوين قاعدة بيانات Kong
# ============================================================================
KONG_PG_HOST=kong-database
KONG_PG_PORT=5432
KONG_PG_DATABASE=kong
KONG_PG_USER=kong
KONG_PG_PASSWORD=YourStrongKongPassword123!

# ============================================================================
# JWT Secrets - Generate with: openssl rand -base64 32
# أسرار JWT - قم بالتوليد باستخدام: openssl rand -base64 32
# ============================================================================

# Starter Package JWT Secret
# سر JWT للباقة الأساسية
STARTER_JWT_SECRET=starter-secret-change-this-to-random-string-in-production

# Professional Package JWT Secret
# سر JWT للباقة المتوسطة
PROFESSIONAL_JWT_SECRET=professional-secret-change-this-to-random-string-in-production

# Enterprise Package JWT Secret
# سر JWT للباقة المتقدمة
ENTERPRISE_JWT_SECRET=enterprise-secret-change-this-to-random-string-in-production

# Research Package JWT Secret
# سر JWT لباقة البحث العلمي
RESEARCH_JWT_SECRET=research-secret-change-this-to-random-string-in-production

# Admin JWT Secret
# سر JWT للمسؤولين
ADMIN_JWT_SECRET=admin-secret-change-this-to-random-string-in-production

# Service Accounts JWT Secret
# سر JWT لحسابات الخدمة
SERVICE_JWT_SECRET=service-secret-change-this-to-random-string-in-production

# Trial Users JWT Secret
# سر JWT للمستخدمين التجريبيين
TRIAL_JWT_SECRET=trial-secret-change-this-to-random-string-in-production

# ============================================================================
# RS256 JWT Configuration (RSA Public Keys)
# تكوين RS256 JWT (مفاتيح RSA العامة)
# ============================================================================
# Generate RSA keys with:
# openssl genrsa -out private.pem 2048
# openssl rsa -in private.pem -outform PEM -pubout -out public.pem
# Then copy the content of public.pem (without -----BEGIN/END----- lines)
# قم بتوليد مفاتيح RSA باستخدام:
# openssl genrsa -out private.pem 2048
# openssl rsa -in private.pem -outform PEM -pubout -out public.pem
# ثم انسخ محتوى public.pem (بدون أسطر -----BEGIN/END-----)

# JWT Algorithm Configuration
# تكوين خوارزمية JWT
JWT_ALGORITHM=RS256  # Options: RS256, HS256

# Starter Package RSA Public Key
# مفتاح RSA العام للباقة الأساسية
STARTER_RSA_PUBLIC_KEY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA... (replace with actual public key)"

# Professional Package RSA Public Key
# مفتاح RSA العام للباقة المتوسطة
PROFESSIONAL_RSA_PUBLIC_KEY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA... (replace with actual public key)"

# Enterprise Package RSA Public Key
# مفتاح RSA العام للباقة المتقدمة
ENTERPRISE_RSA_PUBLIC_KEY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA... (replace with actual public key)"

# Research Package RSA Public Key
# مفتاح RSA العام لباقة البحث العلمي
RESEARCH_RSA_PUBLIC_KEY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA... (replace with actual public key)"

# Admin RSA Public Key
# مفتاح RSA العام للمسؤولين
ADMIN_RSA_PUBLIC_KEY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA... (replace with actual public key)"

# Main API RSA Public Key (for sahool-api consumer)
# مفتاح RSA العام لـ API الرئيسي
SAHOOL_API_RSA_PUBLIC_KEY="MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA... (replace with actual public key)"

# Key Rotation Settings
# إعدادات تدوير المفاتيح
JWT_KEY_ROTATION_ENABLED=true
JWT_KEY_ROTATION_DAYS=90  # Rotate keys every 90 days / قم بتدوير المفاتيح كل 90 يوماً

# ============================================================================
# Kong Configuration
# تكوين Kong
# ============================================================================

# Log Level: debug, info, notice, warn, error, crit
KONG_LOG_LEVEL=notice

# ============================================================================
# Konga (Kong Admin UI) Configuration
# تكوين Konga (واجهة إدارة Kong)
# ============================================================================
KONGA_ENV=production

# ============================================================================
# Grafana Configuration
# تكوين Grafana
# ============================================================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=YourStrongGrafanaPassword123!

# ============================================================================
# Redis Configuration
# تكوين Redis
# ============================================================================
REDIS_PASSWORD=YourStrongRedisPassword123!

# ============================================================================
# SAHOOL Platform Configuration
# تكوين منصة سهول
# ============================================================================

# Platform Environment
PLATFORM_ENV=production

# API Base URL
API_BASE_URL=https://api.sahool.platform

# Frontend URL
FRONTEND_URL=https://app.sahool.platform

# ============================================================================
# Security Configuration
# تكوين الأمان
# ============================================================================

# CORS Environment Configuration
# تكوين بيئة CORS
# Valid values: development, staging, production
# القيم الصالحة: development, staging, production
CORS_ENVIRONMENT=development

# CORS Allowed Origins (comma-separated) - Legacy configuration
# يتم استخدام ملفات cors-config/*.yml للتكوين الحديث
CORS_ALLOWED_ORIGINS=https://app.sahool.platform,https://admin.sahool.platform

# Trusted IP Ranges (comma-separated)
TRUSTED_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# Admin API Allowed IPs (comma-separated)
ADMIN_ALLOWED_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# ============================================================================
# Rate Limiting Configuration
# تكوين تحديد المعدل
# ============================================================================

# Starter Package Limits
STARTER_RATE_LIMIT_MINUTE=100
STARTER_RATE_LIMIT_HOUR=5000
STARTER_RATE_LIMIT_DAY=100000

# Professional Package Limits
PROFESSIONAL_RATE_LIMIT_MINUTE=1000
PROFESSIONAL_RATE_LIMIT_HOUR=50000
PROFESSIONAL_RATE_LIMIT_DAY=1000000

# Enterprise Package Limits
ENTERPRISE_RATE_LIMIT_MINUTE=10000
ENTERPRISE_RATE_LIMIT_HOUR=500000
ENTERPRISE_RATE_LIMIT_DAY=10000000

# Research Package Limits
RESEARCH_RATE_LIMIT_MINUTE=10000
RESEARCH_RATE_LIMIT_HOUR=500000
RESEARCH_RATE_LIMIT_DAY=10000000

# Trial Package Limits
TRIAL_RATE_LIMIT_MINUTE=50
TRIAL_RATE_LIMIT_HOUR=2000
TRIAL_RATE_LIMIT_DAY=30000

# ============================================================================
# Monitoring & Alerting
# المراقبة والتنبيهات
# ============================================================================

# Prometheus
PROMETHEUS_RETENTION=15d

# Alert Email
ALERT_EMAIL=alerts@sahool.platform

# ============================================================================
# Backup Configuration
# تكوين النسخ الاحتياطي
# ============================================================================

# Backup S3 Bucket
BACKUP_S3_BUCKET=sahool-kong-backups

# Backup Retention Days
BACKUP_RETENTION_DAYS=30

# ============================================================================
# SSL/TLS Configuration
# تكوين SSL/TLS
# ============================================================================

# SSL Certificate Path
SSL_CERT_PATH=/etc/kong/ssl/sahool.crt
SSL_KEY_PATH=/etc/kong/ssl/sahool.key

# Let's Encrypt Email
LETSENCRYPT_EMAIL=admin@sahool.platform

# ============================================================================
# Logging & Tracing
# التسجيل والتتبع
# ============================================================================

# Log Format: json, combined, minimal
LOG_FORMAT=json

# Enable Request Tracing
ENABLE_TRACING=true

# Jaeger Endpoint (if using distributed tracing)
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# ============================================================================
# Performance Tuning
# ضبط الأداء
# ============================================================================

# Nginx Worker Processes (auto or number)
NGINX_WORKER_PROCESSES=auto

# Nginx Worker Connections
NGINX_WORKER_CONNECTIONS=10000

# Database Pool Size
DB_POOL_SIZE=100

# ============================================================================
# Feature Flags
# علامات الميزات
# ============================================================================

# Enable Caching
ENABLE_CACHING=true

# Enable Circuit Breaker
ENABLE_CIRCUIT_BREAKER=true

# Enable IP Restriction for Admin
ENABLE_ADMIN_IP_RESTRICTION=true

# Enable Bot Detection
ENABLE_BOT_DETECTION=true

# ============================================================================
# Integration Configuration
# تكوين التكاملات
# ============================================================================

# NATS Server
NATS_URL=nats://nats:4222

# PostgreSQL (Main Database)
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=sahool
POSTGRES_USER=sahool
POSTGRES_PASSWORD=YourStrongPostgresPassword123!

# Redis (Main Cache)
REDIS_HOST=redis
REDIS_PORT=6379

# ============================================================================
# Service Discovery
# اكتشاف الخدمة
# ============================================================================

# Consul
CONSUL_HOST=consul
CONSUL_PORT=8500

# Service Registry
SERVICE_REGISTRY_URL=http://consul:8500

# ============================================================================
# Notes
# ملاحظات
# ============================================================================
# 1. Generate strong passwords for all secrets
# 2. Keep this file secure and never commit to version control
# 3. Rotate JWT secrets every 90 days
# 4. Use environment-specific values for production
# 5. Enable HTTPS in production
#
# 1. قم بتوليد كلمات مرور قوية لجميع الأسرار
# 2. احفظ هذا الملف بشكل آمن ولا تقم بإيداعه في نظام التحكم بالإصدارات
# 3. قم بتدوير أسرار JWT كل 90 يوماً
# 4. استخدم قيماً خاصة بكل بيئة للإنتاج
# 5. فعّل HTTPS في الإنتاج
# ============================================================================
